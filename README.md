# FitnessHealthTracker

Додаток веб-API для відстеження активностей, харчування, показників здоров’я та цілей користувача.  
**Основній функціонал:**
- Авторизація та автентифікація користувача (для надання доступу використовується JWT-токен);
- Робота з профілем користувача;
- Встановлення цілей користувача на певний період часу;
- Керування тренуваннями: створення, додавання завершених тренувань з відстеженням використаних калорій;
- Керування харчуванням: створення, додавання власних страв з можливістю вказати поживні речовини (білки, жири, вуглеводи, калорійність);
- Відстеження показників здоров'я;
- Статистика по користувачу за певний інтервал часу (або дату): використані калорії за тренуваннями, набуті калорії з харчуванням, загальні калорії за день.

В якості архітектури було обрано Clean Architecture, що надає можливості маштабування, тестованності та зручності розробки. Наприкінці опису наведено матеріали, за допомогою яких будувалася ця архітектура.
Система має реляційну базу даних MS SQL, схему наведено нижче:
<img width="875" height="830" alt="image" src="https://github.com/user-attachments/assets/079afd14-0ade-41a3-af3f-f39faba002b8" />
Опис сутностей:
- **Користувач** - має особисті дані (прізвище, ім'я, пошта), також має параметри (наприклад, дата народження, вік, можливе розширення)
- **Цілі** - є два види цілей: системні (має тільки назву, наприклад, "Скинути вагу") та користувацькі, тобто такі, які вже на основі системних цілей ставить собі користувач на певний період часу та з вказанням конкретного значення (наприклад, на скільки кілограм треба схуднути) та статусом (досягнуто чи ні)
- **Тренування** - також є два види: системні та користувальницьки, де користувач вказує пройдене тренування з системних, час тренування та кількість витрачених калорій
- **Страви** - можуть бути створені адміністратором, тоді будуть доступні всім користувачам, а також сам користувач може створювати власні страви. При створенні обов'язково вказуються поживні речовини (більки, жири, углеводи)  та калорійність на 100 грам страви
- **Прийоми їжі** - створюються користувачем з вибором страви, вказанням ваги порції та часу
- **Показники здоров'я** - будь-які з доступних видів показників (вага, зріст, пульс) зі вказанням дати та конкретного значення показника


Також система має логування (логи у файлі service{}.log, на кожний день створюються різні файли) за допомогою пакету Serilog, для керування користувачами використовується .NET Identity.

### Для встановлення та налаштування додатку потрібно зробити наступні дії:
1. Скопіювати репозиторій на локальний комп'ютер;
2. Змінити назву Data Source на власний SQL сервер у файли ConfigureServices проекту Infrustructure (\FitnessHealthTracker\FitnessHealthTracker.Infrastructure\ConfigureServices.cs);
3. Провести міграції для створення БД: у Package Manager Console ввести наступну команду
   Update-Database -StartupProject FitnessHealthTracker.API -Project FitnessHealthTracker.Infrastructure
4. Запустити API-додаток рішення за допомогою https.

### Обмеження додатку:
- При реєстрації пароль користувача повинен бути не менше 8 символів, містити літери, цифри та знаки
- 


### Опис доступних ендпоінтів та приклад даних для використання:

- **Шлях ендпоінту:** `GET /api/Aim/all`  
**Опис:** Отримати список всіх цілей (системних)

- **Шлях ендпоінту:** `POST /api/Aim`  
**Опис:** Додавання нової мети
**Приклад запиту:**
```json
<Aim>
```

- **Шлях ендпоінту:** `PUT /api/Aim`  
**Опис:** Оновлення мети
**Приклад запиту:**
```json
<Aim>
```

- **Шлях ендпоінту:** `DELETE /api/Aim/{aimId}`  
**Опис:** Видалення мети

- **Шлях ендпоінту:** `POST /api/Aim/user`  
**Опис:** Додавання нової мети користувача
**Приклад запиту:**
```json
<UserAimDto>
```

- **Шлях ендпоінту:** `PUT /api/Aim/user`  
**Опис:** Оновлення мети користувача
**Приклад запиту:**
```json
<UserAimDto>
```

- **Шлях ендпоінту:** `DELETE /api/Aim/user/{userAimId}`  
**Опис:** Видалення мети користувача

- **Шлях ендпоінту:** `GET /api/Aim/user/{userId}`  
**Опис:** Отримання список всіх цілей користувача

- **Шлях ендпоінту:** `PATCH /api/Aim/user/achieve/{userAimId}`  
**Опис:** Оновлення статусу мети на "досягнуто"

- **Шлях ендпоінту:** `GET /api/Aim/user/latest/{userId}`  
**Опис:** Отримання останньою за датою мети користувача

- **Шлях ендпоінту:** `POST /api/Auth/register`  
**Опис:** Реєстрація нового користувача
**Приклад запиту:**
```json
<NewUserDto>
```

- **Шлях ендпоінту:** `POST /api/Auth/login`  
**Опис:** Авторизація користувача
**Приклад запиту:**
```json
<UserLoginDto>
```

- **Шлях ендпоінту:** `GET /api/Exercise/all`  
**Опис:** Отримання список всіх доступних вправ (системних)

- **Шлях ендпоінту:** `POST /api/Exercise`  
**Опис:** Додавання нової вправи
**Приклад запиту:**
```json
<Exercise>
```

- **Шлях ендпоінту:** `PUT /api/Exercise`  
**Опис:** Оновлення вправи
**Приклад запиту:**
```json
<Exercise>
```

- **Шлях ендпоінту:** `DELETE /api/Exercise/{exerciseId}`  
**Опис:** Видалення вправи

- **Шлях ендпоінту:** `POST /api/Exercise/user`  
**Опис:** Додавання нової вправи користувача (з тривалістю та витраченими калоріями)
**Приклад запиту:**
```json
<UserExerciseDto>
```

- **Шлях ендпоінту:** `PUT /api/Exercise/user`  
**Опис:** Оновлення вправи користувача
**Приклад запиту:**
```json
<UserExerciseDto>
```

- **Шлях ендпоінту:** `DELETE /api/Exercise/user/{exerciseId}`  
**Опис:** Видалення вправи користувача
 
- **Шлях ендпоінту:** `GET /api/Exercise/user/{userId}`  
**Опис:** Отримання список всіх вправ користувача

- **Шлях ендпоінту:** `POST /api/HealthParameters`  
**Опис:** Додавання нової показника здоров'я
**Приклад запиту:**
```json
<HealthParameter>
```

- **Шлях ендпоінту:** `DELETE /api/HealthParameters/{parameterId}`  
**Опис:** Видалення показника здоров'я

- **Шлях ендпоінту:** `GET /api/HealthParameters/type`  
**Опис:** Отримання списку всіх показників користувача за типом показника

- **Шлях ендпоінту:** `GET /api/HealthParameters/interval`  
**Опис:** Отримання списку всіх показників користувача за певний інтервал часу

- **Шлях ендпоінту:** `GET /api/Meal`  
**Опис:** Отримання списку всіх доступних страв (системних)

- **Шлях ендпоінту:** `POST /api/Meal`  
**Опис:** Додавання нової страви
**Приклад запиту:**
```json
<Meal>
```

- **Шлях ендпоінту:** `PUT /api/Meal`  
**Опис:** Оновлення страви
**Приклад запиту:**
```json
<UpdateMealDto>
```

- **Шлях ендпоінту:** `GET /api/Meal/{userId}`  
**Опис:** Отримання списку всіх страв, створених користувачем

- **Шлях ендпоінту:** `PATCH /api/Meal/{mealId}/nutrients`  
**Опис:** Оновлення поживних речовин страви
**Приклад запиту:**
```json
<MealNutrients>
```

- **Шлях ендпоінту:** `DELETE /api/Meal/{mealId}`  
**Опис:** Видалення страви

- **Шлях ендпоінту:** `GET /api/Meal/history/{userId}`  
**Опис:** Отримання списку всіх прийомів їжі користувачем

- **Шлях ендпоінту:** `POST /api/Meal/history`  
**Опис:** Додавання нового прийому їжі (страви) користувачем
**Приклад запиту:**
```json
<MealHistoryDto>
```

- **Шлях ендпоінту:** `PUT /api/Meal/history`  
**Опис:** Оновлення прийому їжі
**Приклад запиту:**
```json
<MealHistoryDto>
```

- **Шлях ендпоінту:** `DELETE /api/Meal/history/{historyId}`  
**Опис:** Видалення прийому їжі

- **Шлях ендпоінту:** `GET /api/User/parameters/{userId}`  
**Опис:** Отримання параметрів користувача

- **Шлях ендпоінту:** `PUT /api/User/parameters`  
**Опис:** Оновлення параметрів користувача
**Приклад запиту:**
```json
<UserParameters>
```

- **Шлях ендпоінту:** `GET /api/User/{userId}`  
**Опис:** Отримання даних користувача

- **Шлях ендпоінту:** `PUT /api/User`  
**Опис:** Оновлення даних користувача
**Приклад запиту:**
```json
<GetUserDto>
```

- **Шлях ендпоінту:** `GET /api/UserStatistics/TotalCaloriesPerMealDate`  
**Опис:** Отримання даних про прийоми їжі з розрахунком калорійності за певну дату або інтервал часу

- **Шлях ендпоінту:** `GET /api/UserStatistics/TotalCaloriesPerActivityDate`  
**Опис:** Отримання даних про тренування з розрахунком калорійності за певну дату або інтервал часу

- **Шлях ендпоінту:** `GET /api/UserStatistics/TotalCaloriesPerDate`  
**Опис:** Отримання даних про прийоми їжі та тренування з розрахунком калорійності за певну дату або інтервал часу
